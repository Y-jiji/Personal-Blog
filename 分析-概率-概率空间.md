# 概率空间与随机变量

> 一个非常可笑的事实是我才知道superscript的意思是上角标. 草. 

## 概率空间&概率测度

> 概率空间的精妙之处在于, 给出了一些事件, 但只关注其上的测度. 
>
> 从而观测上面的集函数时, 总是将函数的值和这个集合的测度放在一起观察, 而绕开了事件本身. 
>
> // 可能需要重写↑

### 定义

其中, Ω代表了所有的结果(被用来间接地定义事件). F则是所有事件的集合, 从测度论角度, 它是Ω上的σ代数. 
$$
{\cal P}=(\Omega,{\cal F},P)
$$

### 结果Ω和事件F

$$
{\cal F}\sube 2^\Omega:
\left\{
\begin{aligned}
&\forall \{A_n\in {\cal F}\mid n\in\N\}:\bigcup_{n\in\N}A_n\in {\cal F}\\
&\Omega\in{\cal F}\\
&\forall A,B\in {\cal F}:A-B\in{\cal F}\\
\end{aligned}
\right.
$$

### 概率测度P

P需要满足概率测度的特殊性质. 
$$
P:{\cal F}\to[0,1]:
\left\{\begin{aligned}
&\forall \{A_n\in {\cal F}\mid (n\in\N)\and(\forall A_i\ne A_j:A_i\cap A_j=\phi)\}:\bigcup_{n\in\N}A_n=\sum_{n\in \N} P(A)\\
&P(\Omega)=1\\
\end{aligned}\right.
$$
P需要是一个测度, 所以它也需要具备测度的一般性质. 

$$
\left\{\begin{aligned}
&A\sube B\Rightarrow P(A)\le P(B)\\
&A\sube \bigcup_{n\in\N} A_n\Rightarrow P(A)\le \sum_{n\in\N} P(A_n)\\
&P\left(\lim_{n\to\infin}\bigcup_{i\in[n]} A_i\right)=\lim_{n\to \infin}P\left(\bigcup_{i\in[n]} A_i\right)\\
&P\left(\lim_{n\to\infin}\bigcap_{i\in[n]} A_i\right)=\lim_{n\to \infin}P\left(\bigcap_{i\in[n]} A_i\right)(P(A_0)<\infin)\\
\end{aligned}\right.
$$

## $\pi$集族和$\lambda$集族

### 定义

$$
def:\mathscr{A}\;is\;a\;\pi\;system\;on\;\Omega:= \forall A,B\in\mathscr{A}:A\cap B\in \mathscr{A}\\
def:\mathscr{A}\;is\;a\;\lambda\;system\;on\;\Omega:=\bigwedge
\left\{\begin{aligned}
& \forall \{A_n\}\sube \mathscr{A}:(\forall n\in\N:A_n\sube A_{n+1})\Rightarrow\lim_{n\to\infin}A_n\in \mathscr{A}\\
& \forall A,B\in \mathscr{A}:A\sube B\Rightarrow B-A\in \mathscr{A}\\
& \Omega\in \mathscr{A}
\end{aligned}\right.
$$

### $\pi-\lambda$定理

$$
{\cal P}\;is\;a\;\pi\;system,\;{\cal L}\;is\;a\;\lambda\;system:{\cal P\sube L \Rightarrow \sigma(P)\sube L}
$$

证明: 
$$
l({\cal S})=\bigcap_{{\cal S}\sube {\cal L}_i\;:\;{\cal L}_i\;is\;\lambda-system\;}{\cal L}_i\\
\sigma({\cal P})\sube l({\cal P})\Leftrightarrow l({\cal P})\;is\;a\;\sigma\;algebra:
\bigwedge
\left\{\begin{aligned}
&l({\cal P})\;is\;an\;algebra:
\bigwedge\left\{\begin{aligned}
& \forall A,B\in l({\cal P}):A\cup B\in l({\cal P})[\star]\\
& \forall A\in l({\cal P}):A^c\in l({\cal P})\\
& \Omega\in l({\cal P})
\end{aligned}\right.\\
&\forall \{A_n\}\sube l({\cal P}):(\forall n\in\N:A_n\sube A_{n+1})\Rightarrow\lim_{n\to\infin}A_n\in l({\cal P})
\end{aligned}\right.\\
All\;directly\;concluded\;from\;the\;definition\;of\;l({\cal P}),\;except\;[\star]:\\
[\star]\Leftrightarrow \forall A,B\in l({\cal P}):A\cap B\in l({\cal P})\\
 def:{\cal G}_A:=\{B:A\cap B\in l({\cal P})\}\\
\forall A\in l({\cal P}):
{\cal G}_A\;is\;a\;\lambda\;system:
\left\{\begin{aligned}
& \Omega \in {\cal G}_A\Leftarrow A\cap {\Omega}\in l({\cal P})\\
& (\forall B,C \in {\cal G}_A: B\sube C\Rightarrow C-B\in {\cal G}_A)\Leftarrow (\forall B,C\in {\cal G}_A:B\sube C \Rightarrow (C-B)\cap A \in l({\cal P}))\\
& \forall \{B_n:n\in \N,\;B_n\sube B_{n+1}\}\sube {\cal G}_A:
\lim_{n\to\infin}(A\cap B_n)\in l({\cal P})
\Rightarrow A\cap(\lim_{n\to\infin}B_n)\in l({\cal P})
\Rightarrow \lim_{n\to \infin}B_n\in {\cal G}_A
\end{aligned}\right.\\
\forall A\in{\cal P}:{\cal G}_A\;is\;a\;\lambda\;system\and {\cal G}_A\supe {\cal P}\Rightarrow {\cal G}_A\supe l({\cal P})\\
\forall A\in l({\cal P}),\,B\in {\cal P}:A\cap B\in l({\cal P})\\
\forall A\in l({\cal P}):{\cal G}_A\supe {\cal P}\Rightarrow {\cal G}_A\supe l({\cal P})\Rightarrow \forall B\in l({\cal P}):A\cap B\in l({\cal P})
$$

## 事件列的极限

### 上极限和下极限

$$
def:\{A_n\}:=\{A_n:n\in \N,\;A_n\sube \Omega\}\\
\overline\lim\limits_{n\to \infin}A_n:=\lim_{m\to\infin}\bigcup_{(n\in \N)\and (n\ge m)} A_n\\
\underline\lim\limits_{n\to\infin} A_n:=\lim_{m\to\infin}\bigcap_{(n\in \N)\and (n\ge m)} A_n
$$



## 随机变量

### 实数集上的Borel代数

$$
{\cal B}_\R:=\sigma(\{(a,b):a,b\in\R^2\})\\
$$

### 定义

随机变量是从$\Omega$到$\R$​的Borel可测函数. (一类函数)
$$
\begin{aligned}
&using\;Space:(\Omega,{\cal F},P)\\
&\;\;\;\;\;\;def:X: \Omega\to \R\;is\;a\;random\;variable:= \forall B\in {\cal B }_\R: X^{-1}(B):=\{\omega:X(\omega)\in B\}\in {\cal F}
\end{aligned}
$$

### 随机变量对应的σ代数

$$
\sigma_{X}=\{X^{-1}(S):S\in{\cal B}_\R\}
$$

## 概率分布

### 定义

$$
\begin{aligned}
&X\;is\;a\;random\;variable\\
&\;\;\;\;\;\;\;\;\;def:\mu_X:{\cal B}_\R\to \R\;is\;a\;proabability\;distribution\;of\;X:= \mu_X(A)=P(X\in A)=P(X^{-1}(A))
\end{aligned}
$$

### 概率分布函数

$$
def:F(x):=P(X\le x)=P(X^{-1}(-\infin,x]))
$$

### 概率分布函数的性质

$$
\begin{aligned}
&\forall x<y:F(x)\le F(y)\\
&\lim_{y\to x^+}F(y)=F(x)\\
&\lim_{y\to x^-}F(y)=F(x)\Leftrightarrow F(x)=P(X< x)
\end{aligned}
$$

### 概率密度函数

如果概率分布函数能够用一个函数$f$用如下的反常积分表示: 
$$
F(x)=\int_{-\infin}^x f(x){\rm d}x
$$
则称$f$为这个概率分布对应的概率密度函数. 

## 期望和方差

### 定义

$$
E[X]=\int_A X\cdot {\rm d}P\\
\sigma^2[X]=E[(X-E[x])^2]
$$

### 性质

$$
E[X+Y]=E[X]+E[Y]\\
\sigma^2[X]=E[(X-E[x])^2]=E[X^2]-E[x]^2
$$

## 矩

### 定义

$$
\mu_n=\int X^n{\rm d}F\\
\nu_n=\int (X-E[X])^n{\rm d}F
$$

## 条件概率

### 定义

$$
P(A|B)=P(A\cap B)/P(B)
$$

## 习题

### I. 概率测度, 代数和σ代数

> 测度论的复习题, 同时为建立大数定律的直觉提供一些准备

(1) 已知: 
$$
\{{\cal A_i}:i\in \N\}:
\bigwedge\left\{\begin{aligned}
& \forall i\in\N: {\cal A_i\sube A_{i+1}}\\ 
& \forall i\in \N:{\cal A_i}\;is\;\sigma\;algebra\;on\;S
\end{aligned}\right.
$$
证明: 
$$
{\cal A}=\lim_{n\to \infin}{\cal A}_n\;is\;an\;algebra\;but\;not\;necessarily\;a\;\sigma\;algebra
$$
解答: 
$$
\begin{aligned}
& {\cal A}\;is\;an\;algebra:
	\left\{\begin{aligned}
	& S\in {\cal A}_n\sube {\cal A}\\
	&\forall A,B\in{\cal A}:(\exist n\in\N:A,B\in {\cal A}_n)\Rightarrow A\cup B\in {\cal A_n}\sube {\cal A}\\
	& \forall A\in{\cal A}:(\exist n\in\N:A\in {\cal A}_n)\Rightarrow A^C\sube {\cal A}
	\end{aligned}\right.\\
& A\;counter\;example\;of\;\{{\cal A}_n\}\;that\;{\cal A}\;is\;not\;a\;\sigma\;algebra:\\
& {\cal A}_n=\{A\in {\cal B}_\R:n!\sup A\in \Z\or \sup A=+\infin\}\\
& {\cal A} = \{A\in {\cal B}_\R:\sup A\in \Q\}\;is\;not\;a\;\sigma\;algebra
\end{aligned}
$$
(2) 定义:
$$
{\cal A}=\{A\sube \N^* \mid \exist \theta\in \R,\forall \varepsilon>0,\exist N\in \N,\;\forall n>N,\;\left|\frac{|A\cap\{1,2,\cdots,n\}|}{n}-\theta\right|<\varepsilon\}
$$
即$\forall A\in{\cal A}$下面的定义的极限存在
$$
\mu(A)=\lim_{n\to \infin}\frac{|A\cap\{1,2,\cdots,n\}|}{n}
$$

验证并证明: $\cal A$是否为$\N$上的σ代数, 或者退一步说, $\cal A$是否为$\N$上的代数

解答: 

$\cal A$不是$\N$上的σ代数: 
$$
A=\{n\in\N:\exist k\in\N:n\in [2^{2k},2^{2k+1})\}=\bigcup_{n\in \N\cap[2^{2k},2^{2k+1}):k\in\Z}\{n\}
$$
$\cal A$不是$\N$上的代数: 
$$
\left\{\begin{aligned}
&\forall A\in{\cal A}:A^c\in {\cal A}::[*]\\
&\forall A,B\in{\cal A}:A\cup B\in{\cal A}::[\star]
\end{aligned}\right.
$$

$[*]$式是对的, 但是$[\star]$式是有问题的, 下面给$[\star]$举个反例: 
$$
A=\{2k+1:k\in\N\}\\
B=\{n:\exist k\in\N:n\in [2^{2k},2^{2k+1})\and 2\nmid n\}\cup \{n:\exist k\in\N:n\in[2^{2k+1},2^{2k+2})\and 2\mid n\}
$$

(3) 证明: 
$$
P(\overline\lim\limits_{n\to\infin}{A_n})\ge\overline\lim\limits_{n\to\infin}P(A_n)
$$
解答: 由测度的一般性质
$$
P(\lim_{n\to \infin} \bigcup_{i\ge n}A_i)=\lim_{n\to \infin}P(\bigcup_{i\ge n} A_i)\ge \lim_{n\to \infin}\sup_{i\ge n}P(A_i)
$$


### II. 离散型随机变量

(1) 有$n$​种卡片, 每次抽取一张卡片, 抽中第$k$​种卡片的概率是$p(\{k\})$​, 现在进行无限次抽取, 试求使得每种卡片都至少抽中一次的抽取次数的期望. 

解答: $S$是一些卡片种类的集合, 记$T$次抽取之内$S$中每张卡片都被抽到一次的概率是$p(T;S)$
$$
p(T;S)=p(T-1;S)\cdot p(S)+\sum_{k\in S}p(T-1;S-\{k\})\cdot p(\{k\})\\
p(0;S)=
\left\{\begin{aligned}
&1&& S=\phi\\
&0&& S\ne\phi\\
\end{aligned}\right.
\\
E[X]=\sum_{T=1}^{\infin} T\cdot [p(T;\{1,2,\cdots , n\})-p(T-1;\{1,2,\cdots,n\})]\\
=\lim_{T\to\infin}[T\cdot p(T;\{1,2,\cdots,n\})-\sum_{t=1}^{T-1}p(t;\{1,2,\cdots,n\})]\\
$$

(2) 假设$\{X_k:k\in[1,2n]\cap\N\}$​服从独立同分布, 证明: 
$$
\forall \alpha\in\R:P(|\frac{X_1+X_2+\cdots+X_{2n}}{2n}-\alpha|\le|\frac{X_1+X_2+\cdots+X_n}{n}-\alpha|)\ge\frac12
$$
解答:
$$
\left.\begin{aligned}
&|\frac{X_1+X_2+\cdots+X_{2n}}{2n}-\alpha|^2-|\frac{X_1+X_2+\cdots+X_n}{n}-\alpha|^2\\
&=(\frac{-X_1-X_2-\cdots-X_n+X_{n+1}\cdots+X_{2n}}{2n})(\frac{3X_1+3X_2+\cdots+3X_n+\cdots+X_{2n}}{2n}-2\alpha)
\end{aligned}\right.
\\
\begin{aligned}
&P(|\frac{X_1+X_2+\cdots+X_{2n}}{2n}-\alpha|\le|\frac{X_1+X_2+\cdots+X_n}{n}-\alpha|)\\
=&\frac12[P(3X_1+3X_2+\cdots+3X_n+\cdots+X_{2n}-2\alpha n\le0|-X_1-X_2-\cdots-X_n+X_{n+1}\cdots+X_{2n}>0)\\
&+P(3X_1+3X_2+\cdots+3X_n+\cdots+X_{2n}-2\alpha n\ge0|-X_1-X_2-\cdots-X_n+X_{n+1}\cdots+X_{2n}<0)]\\
\ge &\frac12[P(4X_{n+1}+\cdots+4X_{2n}\le 2\alpha n)+P(4X_{n+1}+\cdots+4X_{2n}\ge 2\alpha n)]\ge \frac12
\end{aligned}
$$

### III. 概率密度函数

> 加强对概率密度函数的感觉

(1) 给定随机变量$X$​, 它的概率分布函数为$F_X(x)=P(X\le x)$​是连续函数. 

证明:
$$
def:Y:=F_X(X)\\
\forall y\in[0,1]:F_Y(y)=P(Y\le y)=y
$$
解答: (可以尝试以下硬想, 体验不错, 可以感受到有间断点就不行的原因)
$$
F_Y(y)=P(Y\le y)=P(X\le F_X^{-1}(y))=F_X(F_X^{-1}(y))=y
$$
(2) 随机变量$X$​有连续的概率密度函数$f_X$, 并且$P(\alpha \le X\le \beta)=1$, 给定严格单调增且可微的函数$g:(\alpha,\beta)\to \R$

证明: 
$$
f_{g(X)}:y\mapsto\frac{f_X(g^{-1}(y))}{g'(g^{-1}(y))}
$$
解答: 
$$
F_{g(X)}(g(x))=F_X(x)\Rightarrow f_{g(X)}(g(x))\cdot g'(x)=f_X(x)
$$

### IV. 不变的条件概率

> 事件$A$在一族事件$B_i:i\in I$上的概率不变时, $\forall i\in I:P(A)=P(A|B_i)$

(1) 6根稻草沿竖直方向平行放置, 将6根稻草向上的一端两两相接, 将6根稻草向下的一端两两相接. 求: 6根稻草连成环的概率. 

解答: 

设$\Omega$为6个不同的点划为三组后两两连线的不同结果的集合. $|\Omega|={\rm C}_6^2\cdot {\rm C}_4^2\cdot{\rm C}_2^2=90$

也可以用全排列后分划的方法计算得到同样结果. $|\Omega|=6!/(2!)^3=90$

按照题设, 稻草相连的全部情况为$\Omega ^2$(每根稻草都可区分)

现在设事件$A$为朝上的一端采取了某种特定的连接方法, 事件$B$为六根稻草连成环. 
$$
P(BA)=P(B|A)\cdot P(A)\\
P(B|A)=(2^3\cdot {\rm P}_2^2)/|\Omega|=\frac{8}{45}\\
P(B)=\sum_{A=\{a\},\,a\in \Omega}P(B|A)\cdot P(A)=\frac{8}{45}\sum_{A=\{a\},\,a\in\Omega}P(A)=\frac{8}{45}
$$
(2) 给定一个球面, 上面有4个点, 它们在球面上独立均匀同分布. 求某个点落在其他三个点张成的球面三角形的概率. 

解答: 

取3条直径, 它们和球面相交形成3对对径点. 对球面上任何一个点$x$, 总能在3对对径点中各选一个, 使得$x$落在它们张成的球面三角形上. 

设$P(B)$为三条直径取特定角度, 第4个点取特定位置的概率密度(当然就是球表面积分之一, 或者球半表面积分之一, 因为是均匀分布)
$$
P(B)=f(\theta_0,\psi_0)\prod_{i\in [1,3]}f(\theta_i, \psi_i)\\
P(AB)=P(A|B)\cdot P(B)=\frac{1}8 P(B)\\
P(A)=\frac18\iint_{\theta_i\in [0,2\pi),\psi_i\in [-\pi/2,\pi /2]}f(\theta_0,\psi_0)\cdot\prod_{i\in [1,3]}{\iint}_{\theta_i\in [0,2\pi),\psi_i\in [0,\pi /2]}f(\theta_i,\psi_i)=\frac 18
$$




# ::未安排的杂项::

## Chebyshev’s inequality

$$
\varphi:\R\to\R^+\\
\inf\{\varphi(y):y\in A\}\cdot P(x\in A)\le E(\varphi(x);x\in A)\le E(\varphi(x))
$$



## 

## 方差

### 定义

$$
\sigma^2[X]=\sum_{i=1}^{\infin}(x_i-E[x])^2p[x_i]
$$

### 标准差

$$
\sigma[X]=\sqrt{\sum_{i=1}^{\infin}(x_i-E[x])^2p[x_i]}
$$

使得此量和期望的单位一样

### 性质

通过数学期望的线性性质可得
$$
\sigma^2[X]=E[X^2]-E[X]^2
$$
由此可得，期望 $ E[x^2] $ 存在则方差存在

### Chebyshev’s inequality

$$
\forall \varepsilon>0,\;P[|X-E[X]|\ge \varepsilon]\le \frac{\sigma^2[X]}{\varepsilon^2}
$$





## 矩

### 定义

$$
\mu_k=\int x^k{\rm d}P
$$

### 引理

$$
\begin{aligned}
&E[X^m(X-E[X])^{n}]\\
&=E[(X^{m+1}-X^mE[X])(X-E[X])^{n-1}]\\
&=E[X^{m+1}(X-E[X])^{n-1}]-E[X]E[X^m(X-E[X])^{n-1}]
\end{aligned}
$$

### 递推公式

$$
\nu_k=E[(X-E[X])^{k-1}(X-E[X])]=E[X(X-E[X])^{k-1}]-E[X]\nu_{k-1}
$$



## 变异系数

### 定义

$$
\frac{\sigma[x]}{E[x]}
$$

## 偏度系数

### 定义

$$
\beta_s=\frac{E[(X-E[X])^3]}{\sigma[x]^{\frac32}}
$$




# 概率密度函数

## 将概率分布分派给随机变量

$$
P\sim x:=p(x)=P(x)
$$



## 正态分布

$$
N(\mu,\sigma^2)(x)=\frac{1}{\sigma\sqrt{2\pi}}exp({-\frac{(x-\mu)^2}{\sigma^2}})
$$

则X的数学期望为：
$$
\begin{aligned}
E[X]=\int_0^{+\infin}N(\mu,\sigma^2)(x){\rm d}x=\int_0^{+\infin}x\frac{1}{\sigma\sqrt{2\pi}}exp({-\frac{(x-\mu)^2}{\sigma^2}}){\rm d}x
\end{aligned}
$$


## 柯西分布



## Γ分布

$$
{\rm Ga}(\alpha,\lambda)(x)=\frac{\lambda^\alpha x^{\alpha-1}e^{-\lambda x}}{\Gamma(\alpha)}
$$

则X的数学期望为：
$$
\begin{align}
&E[X]=\int_0^{+\infin}x\frac{\lambda^\alpha x^{\alpha-1}e^{-\lambda x}}{\Gamma(\alpha)}{\rm d}x\\
&=\frac{\alpha}{\lambda}\int_0^{+\infin}\frac{\lambda^{\alpha+1} x^{(\alpha+1)-1}e^{-\lambda x}}{\Gamma(\alpha+1)}{\rm d}x\\
&=\frac{\alpha}{\lambda}\int_0^{+\infin}{\rm Ga}(\alpha+1,\lambda)(x){\rm d}x\\
&=\frac{\alpha}{\lambda}\\
\end{align}
$$




# 分布列

##  

